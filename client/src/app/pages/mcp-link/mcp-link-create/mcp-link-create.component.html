<nb-card>
  <nb-card-header style="display: flex; justify-content: space-between">
    <label class="label col-form-label">Create MCP Link</label>
  </nb-card-header>
  <nb-card-body>
    <form [formGroup]="mcp" (ngSubmit)="onSubmit()">
      <div
        class=""
      >

      <div class="form-group row">
        <label class="label col-3 col-form-label" for="mineInformationId"
          >Mine Information:</label
        >
        <div class="col-9">
          <nb-select
            
            id="mineInformationId"
            fullWidth
            autocomplete="off"
            placeholder="Mine Information"
            [status]="
              mcp.controls.mineInformationId.dirty
                ? mcp.controls.mineInformationId.invalid
                  ? 'danger'
                  : 'success'
                : 'basic'
            "
            [attr.aria-invalid]="
            mcp.controls.mineInformationId.invalid && mcp.controls.mineInformationId.touched
                ? true
                : null
            "
            formControlName="mineInformationId"
            (selectedChange)="getSiteInformationList()"
          >
            <nb-option
              *ngFor="let option of mineInformationList"
               value="{{ option.id }}"
            >
              {{ option.name }}
            </nb-option>
        </nb-select>
          <ng-container
            *ngIf="
            mcp.controls.mineInformationId.invalid &&
            mcp.controls.mineInformationId.touched
            "
          >
            <p
              class="caption status-danger"
              *ngIf="mcp.controls.mineInformationId.errors?.required"
            >
            Mine Information is required
            </p>
          </ng-container>
        </div>
      </div>

      <div class="form-group row">
        <label class="label col-3 col-form-label" for="siteInformationId"
          >Site Information:</label
        >
        <div class="col-9">
          <nb-select
            
            id="siteInformationId"
            fullWidth
            autocomplete="off"
            placeholder="Site Information"
            [status]="
              mcp.controls.siteInformationId.dirty
                ? mcp.controls.siteInformationId.invalid
                  ? 'danger'
                  : 'success'
                : 'basic'
            "
            [attr.aria-invalid]="
            mcp.controls.siteInformationId.invalid && mcp.controls.siteInformationId.touched
                ? true
                : null
            "
            formControlName="siteInformationId"
            (selectedChange)="getMCPLinkANDFunctionalLocationList()"
          >
            <nb-option
              *ngFor="let option of siteInformationList"
               value="{{ option.id }}"
            >
              {{ option.name }}
            </nb-option>
        </nb-select>
          <ng-container
            *ngIf="
            mcp.controls.siteInformationId.invalid &&
            mcp.controls.siteInformationId.touched
            "
          >
            <p
              class="caption status-danger"
              *ngIf="mcp.controls.siteInformationId.errors?.required"
            >
            Site Information is required
            </p>
          </ng-container>
        </div>
      </div>

      <div class="form-group row">
        <label class="label col-3 col-form-label" for="mcpBoardId"
          >MCP Board:</label
        >
        <div class="col-9">
          <nb-select
            
            id="mcpBoardId"
            fullWidth
            autocomplete="off"
            placeholder="MCP Board"
            [status]="
              mcp.controls.mcpBoardId.dirty
                ? mcp.controls.mcpBoardId.invalid
                  ? 'danger'
                  : 'success'
                : 'basic'
            "
            [attr.aria-invalid]="
            mcp.controls.mcpBoardId.invalid && mcp.controls.mcpBoardId.touched
                ? true
                : null
            "
            formControlName="mcpBoardId"
          >
            <nb-option
              *ngFor="let option of mcpBoardList"
               value="{{ option.id }}"
            >
              {{ option.name }}
            </nb-option>
        </nb-select>
          <ng-container
            *ngIf="
            mcp.controls.mcpBoardId.invalid &&
            mcp.controls.mcpBoardId.touched
            "
          >
            <p
              class="caption status-danger"
              *ngIf="mcp.controls.mcpBoardId.errors?.required"
            >
            MCP Board is required
            </p>
          </ng-container>
        </div>
      </div>

        <div class="form-group row">
          <label class="label col-3 col-form-label" for="name">Panel:</label>
          <div class="col-9">
            <input
              nbInput
              id="panel"
              type="text"
              fullWidth
              placeholder="Panel"
              autocomplete="off"
              [status]="
                mcp.controls.panel.dirty
                  ? mcp.controls.panel.invalid
                    ? 'danger'
                    : 'success'
                  : 'basic'
              "
              [attr.aria-invalid]="
              mcp.controls.panel.invalid && mcp.controls.panel.touched
                  ? true
                  : null
              "
              formControlName="panel"
            />
            <ng-container
              *ngIf="
              mcp.controls.panel.invalid && mcp.controls.panel.touched
              "
            >
              <p
                class="caption status-danger"
                *ngIf="mcp.controls.panel.errors?.required"
              >
              Panel is required
              </p>
            </ng-container>
          </div>
        </div>

        <div class="form-group row">
          <label class="label col-3 col-form-label" for="functionalLocationId"
            >Functional Location:</label
          >
          <div class="col-9">
            <nb-select
              
              id="functionalLocationId"
              fullWidth
              autocomplete="off"
              placeholder="Functional Location"
              [status]="
                mcp.controls.functionalLocationId.dirty
                  ? mcp.controls.functionalLocationId.invalid
                    ? 'danger'
                    : 'success'
                  : 'basic'
              "
              [attr.aria-invalid]="
              mcp.controls.functionalLocationId.invalid && mcp.controls.functionalLocationId.touched
                  ? true
                  : null
              "
              formControlName="functionalLocationId"
            >
              <nb-option
                *ngFor="let option of functionalLocationList"
                 value="{{ option.id }}"
              >
                {{ option.name }}
              </nb-option>
          </nb-select>
            <ng-container
              *ngIf="
              mcp.controls.functionalLocationId.invalid &&
              mcp.controls.functionalLocationId.touched
              "
            >
              <p
                class="caption status-danger"
                *ngIf="mcp.controls.functionalLocationId.errors?.required"
              >
              Functional Location is required
              </p>
            </ng-container>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-9 offset-3">
            <div class="row float-right">

              <input
                type="button"
                style="margin-right: 15px; margin-left: 8px"
                [disabled]="!mcp.valid"
                size="small"
                class="btn btn-primary"
                value="Add Link"
                (click)="addMCPLink()"
              />

            </div>
          </div>
        </div>

        <div class="form-group row">

          <div class="col-12">
            <div class="table-responsive">
              <table class="table table-bordered table-striped table-nowrap mb-0">
                <thead>
                  <tr class="tableheader">
                    <th scope="col">Mine</th>
                    <th scope="col">Site</th>
                    <th scope="col">MCP Board</th>
                    <th scope="col">Pnael</th>
                    <th scope="col">Functional Location</th>
                    <th scope="col">Link</th>
                    <th scope="col">{{'Action'}}</th>
                    <th scope="col">{{'Action'}}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of selectedList">
                    <td style="width: 100px;">{{item.mineInformationName}}</td>
                    <td style="width: 100px;">{{item.siteInformationName}}</td>
                    <td style="width: 100px;">{{item.mcpBoardName}}</td>
                    <td style="width: 100px;">{{item.panel}}</td>
                    <td style="width: 100px;">{{item.functionalLocationName}}</td>
                    <td style="width: 200px;">{{item.link}}</td>
                    <td style="width: 100px;">
                      <button
                       type="button"
                       class="btn btn-sm btn-primary mr-1"
                      (click)="editMCPLink(item)">
                      Edit
                      </button>
                      
                    </td>
                    <td style="width: 100px;">
                      <button
                       type="button"
                       class="btn btn-danger"
                      (click)="deleteMCPLink(item)">
                      Delete
                      </button>
                    </td>
                  </tr>

                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-9 offset-3">
            <div class="row float-right">
              <button
                type="button"
                nbButton
                status="danger"
                [routerLink]="['/pages/mcp-link/create']"
              >
                Cancel
              </button>

              <input
                type="submit"
                style="margin-right: 15px; margin-left: 8px"
                [disabled]="selectedList.length <= 0"
                size="small"
                class="btn btn-primary"
                value="Save"
              />

              <input
                *ngIf="!isCreate"
                type="submit"
                style="margin-right: 15px; margin-left: 8px"
                [disabled]="!mcp.valid"
                size="small"
                class="btn btn-primary"
                value="Update"
              />
            </div>
          </div>
        </div>
      </div>
    </form>

    <!-- <p>Form Status: {{ imageSrc }}</p> -->
  </nb-card-body>
</nb-card>
